#Include 'protheus.ch'
#Include 'parmtype.ch'
#Include 'RestFul.ch'

User Function SE5Controller()	
Return

WSRESTFUL EXTRATOBANCARIO DESCRIPTION "Retorna informações do extrato bancário"

    WSMETHOD POST DESCRIPTION "Retorna informações do extrato bancário" WSSYNTAX ""
    WSMETHOD GET DESCRIPTION "Retorna lista de bancos disponíveis" WSSYNTAX "/bancos"
    WSMETHOD GET GETByCOD DESCRIPTION "Retorna agências do banco especificado" WSSYNTAX "/agencias/{id}" PATH "/agencias/{id}"

END WSRESTFUL


WSMETHOD POST WSRECEIVE RECEIVE WSSERVICE EXTRATOBANCARIO
    Local oResponse := JsonObject():New()
    
    oResponse := SE5Service():GetExtratoBancario()
    
    oRest:SetResponse(oResponse:toJson())

Return

WSMETHOD GET WSRECEIVE RECEIVE WSSERVICE EXTRATOBANCARIO
    Local oResponse := JsonObject():New()

    oResponse := SE5Service():GetBancos()
    
    oRest:SetResponse(oResponse:toJson())
Return


WSMETHOD GET GETByCOD WSRECEIVE RECEIVE WSSERVICE EXTRATOBANCARIO
    Local oResponse := JsonObject():New()
    Local oBody  := JsonObject():New()

    ::SetContentType("application/json")
    oBody := ::GetContent()

    oResponse := SE5Service():GetAgencias(oBody)
    
    oRest:SetResponse(oResponse:toJson())

Return
